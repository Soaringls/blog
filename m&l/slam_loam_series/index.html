
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../logo.jpg">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.8">
    
    
      
        <title>Note after reading paper of loam - notebook</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.f1a3b89f.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
    
    
    
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#desc-about-loam-lego-loam-lio-sam" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="notebook" class="md-header__button md-logo" aria-label="notebook" data-md-component="logo">
      
  <img src="../../logo.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            notebook
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Note after reading paper of loam
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../coding/coding_work_style/" class="md-tabs__link">
        Coding
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../dairy/note-no-valience-chatting/" class="md-tabs__link">
        Dairy
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../filter_eskf_tmp/" class="md-tabs__link md-tabs__link--active">
        M&l
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../math/vector_operation/" class="md-tabs__link">
        Math
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../tools/mathjax/" class="md-tabs__link">
        Tools
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="notebook" class="md-nav__button md-logo" aria-label="notebook" data-md-component="logo">
      
  <img src="../../logo.jpg" alt="logo">

    </a>
    notebook
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Coding
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Coding" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Coding
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/coding_work_style/" class="md-nav__link">
        Coding work style
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      <label class="md-nav__link" for="__nav_2_2">
        C++
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="C++" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          C++
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/c%2B%2B/cpp_17/" class="md-nav__link">
        C++17 新特性
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/c%2B%2B/the_essence_of_c%2B%2B/" class="md-nav__link">
        Bjarne Strooustrup:The Essence of C++
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      <label class="md-nav__link" for="__nav_2_3">
        System&structure
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="System&structure" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          System&structure
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/system%26structure/operation_system/" class="md-nav__link">
        Operation system
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/system%26structure/several_design_patterns_by_cpp/" class="md-nav__link">
        Several Design Patterns By C++
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../coding/system%26structure/uml_graph/" class="md-nav__link">
        UML Graphic
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Dairy
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Dairy" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Dairy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dairy/note-no-valience-chatting/" class="md-nav__link">
        读书笔记:非暴力沟通
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dairy/note-the-seven-habits-of-effective-awosome/" class="md-nav__link">
        读书笔记:高效人士的七个习惯
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      <label class="md-nav__link" for="__nav_4">
        M&l
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="M&l" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          M&l
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../filter_eskf_tmp/" class="md-nav__link">
        Note after reading paper of ESKF
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../filter_kalman/" class="md-nav__link">
        Introduction of Kalman Filter
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../imu_preintegration/" class="md-nav__link">
        Integration IMU
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../lidar-ethicp/" class="md-nav__link">
        icp算法的20年
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../optimizer_gtsam/" class="md-nav__link">
        Introduction of Gtsam
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../point_matcher/" class="md-nav__link">
        note of pointmatcher
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../slam_basic/" class="md-nav__link">
        Slam basic
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../slam_imupre_liomapping/" class="md-nav__link">
        Note after reading paper of lio-mapping
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../slam_imupre_vins/" class="md-nav__link">
        Note after reading paper of VINS
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Note after reading paper of loam
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Note after reading paper of loam
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lidar-motion-compensator" class="md-nav__link">
    lidar motion compensator
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_11" type="checkbox" id="__nav_4_11" >
      
      <label class="md-nav__link" for="__nav_4_11">
        Segmentation
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Segmentation" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_11">
          <span class="md-nav__icon md-icon"></span>
          Segmentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../segmentation/cloud-segmentation-hdmap/" class="md-nav__link">
        cloud segmentation and filtered by hdmap
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../segmentation/cloud-segmentation/" class="md-nav__link">
        点云分割的基本调研
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Math
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Math" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Math
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../math/vector_operation/" class="md-nav__link">
        usage of vector's multi
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Tools
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Tools" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/mathjax/" class="md-nav__link">
        usage of mathjax
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/python_matplotlib/" class="md-nav__link">
        tools python-matploglib
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/tools-devel-environment/" class="md-nav__link">
        tools devel-enviroment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/usage_bazel/" class="md-nav__link">
        Usage Bazel
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/usage_shortcut/" class="md-nav__link">
        Shortcuts and Config Usage of linux and vscode
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/workspace_setup_ubuntu/" class="md-nav__link">
        Setup worksapce in ubuntu
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lidar-motion-compensator" class="md-nav__link">
    lidar motion compensator
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <p>this blog conclud from <strong>loam(Ji Zhang),LeGO-LOAM&amp;LIO-SAM(Tixiao Shan)</strong>
State estimation, localization and mapping are fundamental prerequisites for a successful intelligent mobile robot,required for feedback control, obstacle avoidance, and planning, among many other capabilities.Using <strong>vision-based</strong> and <strong>lidar-based</strong> sensing,great efforts have been devoted to achiving high-performance real-time simultaneous localization and mapping(SLAM) that can support a mobile robot's six degree-of-freedom state estimation.</p>
<!-- more -->
<p>Vision-based methods typically use a monocular or stereo camera and triangulate features across successive images to determine the camera motion.Although vision-based methods are especially suitable for palce recognition,their sensitivity to initialization,illumination and range make them unreliable when they alone are used to supportan autonomous navigation system.
On the other hand, lidar-based methods are largely invariant to illumination change,Especially with the availability of long-range,high-resolution 3D liar,becomes more suitable to directly capture the fine details of an environment in 3D space.Therefor there was researchs among loam,lego-loam and lio-sam, those paper focuses on lidar-based state estimation and mappnig methods.</p>
<table>
<thead>
<tr>
<th>method</th>
<th>strenght</th>
<th>weakness</th>
</tr>
</thead>
<tbody>
<tr>
<td>vision-based</td>
<td>--more suitable for place recognition<br>--better in loop-closure detection</td>
<td>--sensitive to illumination<br>--view point change may make it unreliable</td>
</tr>
<tr>
<td>lidar-based</td>
<td>--work normally at night<br>--captrure more details about environment at long ranges<br>--bigger angle-view</td>
<td>a</td>
</tr>
</tbody>
</table>
<h1 id="desc-about-loam-lego-loam-lio-sam">Desc about loam lego-loam lio-sam<a class="headerlink" href="#desc-about-loam-lego-loam-lio-sam" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th>method</th>
<th>strength</th>
<th>weakness</th>
<th>IMU</th>
</tr>
</thead>
<tbody>
<tr>
<td>loam</td>
<td>--low-drift and real-time<br>--correct the motion distortion of pointcloud<br>--feature-based scan matching: edge with edge and planar with planar to ensure fats computation becase of its less computational resources requirement<br>--good strategy: coarse processing  at high frequency to estimate veocity, fine processing at low frequency to create map</td>
<td>--saving data in a global voxel map,online optimization process will less efficient when the global voxel map becomes dense in a feature-rich areas<br>--difficult to perform loop closure detection and incorporate other absolute measurements,e.g GPS for pose correction<br>--loam suffers from drift in large-scale test, as it is a scan-matching based method at its core<br>--not very universal to different lidars:the method of extracting features are integrated with the rotating lidar tightly</td>
<td>--de-skew the lidar scan,that is motion compensator<br>--provide a motion prior for scan-matching<br>--<strong>loosely-coupled</strong>:IMU is not involved in the optimization process of the algorithm</td>
</tr>
<tr>
<td>lego-loam</td>
<td>--lightweight and ground-optimized lidar odom<br>--two step L-M optimization computes pose transformation separately<br>--add loop closure</td>
<td></td>
<td>same as loam</td>
</tr>
<tr>
<td>lio-sam</td>
<td>--a tightly-coupled lidar inertial odometry framework built atop a factor graph,which is suitable for multi-sensor fusion and global optimization<br>--an efficient,local sliding window-based scan-matching approach that enables real-time performance by registering selectively chosen new keyframes to a fixed-size set of prior sub-keyframes</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="lidar-motion-compensator">lidar motion compensator<a class="headerlink" href="#lidar-motion-compensator" title="Permanent link">&para;</a></h2>
<p>A scan's point cloud is often skewed because of the rotation mechanism of modern 3D lidar and sensor motion.Solely using lidar for pose estimation is not ideal since registration using skewed pointclouds or features will eventually cause large drift.
Therefore, lidar is typically  used in conjunction with other sensors, such as GPS and IMU, for state estimation and ampping.</p>
<h1 id="loam">LOAM<a class="headerlink" href="#loam" title="Permanent link">&para;</a></h1>
<h2 id="assume">Assume<a class="headerlink" href="#assume" title="Permanent link">&para;</a></h2>
<ul>
<li>lidar is pre-calibrated</li>
<li>angular and linear velocities of the lidar are smooth and continuous over time without abrupt changes</li>
</ul>
<h2 id="feature-point-extraction">Feature Point Extraction<a class="headerlink" href="#feature-point-extraction" title="Permanent link">&para;</a></h2>
<p>we select feature point that are on sharp edges and planar surface patches, Let <span class="arithmatex">\(i\)</span> be a point in <span class="arithmatex">\(P_k\)</span>, and let <span class="arithmatex">\(S\)</span> be the set of consecutive points of <span class="arithmatex">\(i\)</span> returned by the laser scanner in the same scan.
1. Calculate the smoothness <strong><span class="arithmatex">\(c\)</span></strong> of the local surface at point i, where <span class="arithmatex">\(i \in P_k\)</span>
   $$
   c = \frac{1}{|S|\cdot|X^L_{(k,i)}|}\cdot|\sum_{j\in S,j\neq i}(X^L_{(k,i)} - X^L_{(k,j)})|\tag{1}
   $$
2. The points in a scan are sorted based on the <span class="arithmatex">\(c\)</span> values.
   To evenly distribute the feature points within the environment,we separate a scan to four identical subregions.Each subregion can provide maximally 2 edge points and 4 planar points
   $$
   bool&copy;= 
   \begin{cases}
   c &gt; threshold, &amp;  \text{dege points} \\
   c &lt; threshold, &amp;  \text{planar points} 
   \end{cases}
   $$</p>
<ul>
<li>we try to avoid points whose surrounded points are selected,or points on local planar surfaces that are roughly parallel to the laser beams are usually considered as unreliable.</li>
<li>we also try to avoid points that are on boundary of occluded regions</li>
</ul>
<p><strong>Conclusion</strong>
feature points are selected as edge points starting from the maximum <span class="arithmatex">\(c\)</span> value, and planarpoints starting from the minimum <span class="arithmatex">\(c\)</span> value, and if a point is selected,
- The number of selected edge points or planar points cannot exceed the maximum of thesubregion
- None of its surrounding point is already selected
- It cannot be on a surface patch that is roughly parallel to the laser beam, or on boundaryof an occluded region.</p>
<h2 id="find-feature-point-correspondence">Find Feature Point Correspondence<a class="headerlink" href="#find-feature-point-correspondence" title="Permanent link">&para;</a></h2>
<p>The odometry algorithm estimates motion of the lidar within a sweep(frame),Let <span class="arithmatex">\(t_k\)</span>be  the starting  time of a sweep <span class="arithmatex">\(k\)</span>. At the end of each sweep, the point cloud perceived during the sweep,<span class="arithmatex">\(P_k\)</span>, is reprojected to time stamp <span class="arithmatex">\(t_{k+1}\)</span>.we denote the reprojected sweep(frame) as <span class="arithmatex">\(\bar{P_{k}}\)</span>.During the next sweep <span class="arithmatex">\(k+1\)</span>, <span class="arithmatex">\(\bar{P_{k}}\)</span> is used together with the newly received point cloud <span class="arithmatex">\(P_{k+1}\)</span>, to estimate the motion of the lidar.</p>
<table>
<thead>
<tr>
<th align="left">raw frame</th>
<th align="left">corrected frame</th>
<th align="left">edge pts</th>
<th align="left">planar pts</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><span class="arithmatex">\(P_k\)</span><br>during [<span class="arithmatex">\(t_k,t_{k+1}\)</span>]</td>
<td align="left"><span class="arithmatex">\(\bar{P}\_k\)</span><br>by reprojected <span class="arithmatex">\(P_k\)</span>to timesatmp <span class="arithmatex">\(t_{k+1}\)</span></td>
<td align="left"><span class="arithmatex">\(\mathcal{E}_k\)</span><br>edge pts from<span class="arithmatex">\(\bar{P}_k\)</span></td>
<td align="left"><span class="arithmatex">\(\mathcal{H}_k\)</span><br>planar pts from<span class="arithmatex">\(\bar{P}_k\)</span></td>
</tr>
<tr>
<td align="left"><span class="arithmatex">\(P_{k+1}\)</span><br>during [<span class="arithmatex">\(t_{k+1},t_{k+2}\)</span>]</td>
<td align="left"><span class="arithmatex">\(\bar{P}\_{k+1}\)</span><br>by reprojected <span class="arithmatex">\(P_{k+1}\)</span>to timesatmp <span class="arithmatex">\(t_{k+1}\)</span></td>
<td align="left"><span class="arithmatex">\(\mathcal{E}\_{k+1}\)</span><br>edge pts from<span class="arithmatex">\(\bar{P}\_{k+1}\)</span></td>
<td align="left"><span class="arithmatex">\(\mathcal{H}\_{k+1}\)</span><br>planar pts from<span class="arithmatex">\(\bar{P}\_{k+1}\)</span></td>
</tr>
</tbody>
</table>
<ul>
<li>Source of Feature Points</li>
<li>At each iteration,<span class="arithmatex">\(\mathcal{E}\_{k+1}\)</span> and <span class="arithmatex">\(\mathcal{H}\_{k+1}\)</span> are reprojected point sets at the beginning of the sweep <span class="arithmatex">\(\bar{P}\_{k+1}\)</span>by using currently estimated transform.</li>
<li>For each point in <span class="arithmatex">\(\mathcal{E}\_{k+1}\)</span> and <span class="arithmatex">\(\mathcal{H}\_{k+1}\)</span>,we are going to find the closest neighbor point in <span class="arithmatex">\(\bar{P}\_k\)</span>,which is stored in a 3D KD-tree for fast index.</li>
<li>Find the closest points in <span class="arithmatex">\(\mathcal{E}\_{k}\)</span> and <span class="arithmatex">\(\mathcal{H}\_{k}\)</span> for each point of <span class="arithmatex">\(\mathcal{E}\_{k+1}\)</span> and <span class="arithmatex">\(\mathcal{H}\_{k+1}\)</span></li>
<li>
<p>find closest edge points in <span class="arithmatex">\(\mathcal{E}\_{k}\)</span> for each point of <span class="arithmatex">\(\mathcal{E}\_{k+1}\)</span>
    let <span class="arithmatex">\(X^L_{(k+1,i)}\)</span>denote the point <span class="arithmatex">\(\mathcal{i} \in \mathcal{E}\_{k+1}\)</span>,which is in LidarCoordinateSystem{<span class="arithmatex">\(L\)</span>}
    the edge line is represented by two points,points <span class="arithmatex">\(j \in \mathcal{E}\_k\)</span> and <span class="arithmatex">\(l \in \mathcal{E}\_k\)</span> are closest neighbor of <span class="arithmatex">\(i\)</span> in consecutive scans.<br>
    <strong>Notice</strong> we particularly require that <span class="arithmatex">\(j\)</span> and <span class="arithmatex">\(l\)</span> are from different scans considering that a single scan cannot contain more than one points from the same dege line</p>
</li>
<li>
<p>find closest planar points in <span class="arithmatex">\(\mathcal{H}\_{k}\)</span> for each point of <span class="arithmatex">\(\mathcal{H}\_{k+1}\)</span>
    the planar patch is represented by three points,similar to last,we find the closest neighbor of <span class="arithmatex">\(i\)</span> in <span class="arithmatex">\(\bar{P}_k\)</span>,denote as <span class="arithmatex">\(j\)</span>,<span class="arithmatex">\(l\)</span>,<span class="arithmatex">\(m\)</span><br>
    <strong>Notice</strong> about <span class="arithmatex">\(j\)</span>,<span class="arithmatex">\(l\)</span>,<span class="arithmatex">\(m\)</span>,two of them are on the same scan, another is in consecutive scans,This guarantees that the three points are <strong>non-collinear</strong></p>
</li>
<li>compute the distance between every feature point of <span class="arithmatex">\(\bar{P}\_{k+1}\)</span> to the closest neighbor points of <span class="arithmatex">\(\bar{P}\_{k}\)</span><br>
    <strong>Notice</strong> all points in the formula (<span class="arithmatex">\(\mathcal{2}\)</span>) and (<span class="arithmatex">\(\mathcal{3}\)</span>) is the coordinates in {<span class="arithmatex">\(L\)</span>}.</li>
</ul>
<p>$$
   d\varepsilon = \frac{|(\widetilde{X}^L_{(k+1,i)}- \bar{X}^L_{(k,j)})\times (\widetilde{X}^L_{(k+1,i)}- \bar{X}<sup>L_{(k,l)})|}{|\bar{X}</sup>L_{(k,j)} - \bar{X}^L_{(k,l)}|} .\text{distance of point to line} \tag{2} 
   $$
   $$
   d_{\mathcal{H}} = \frac{|(\widetilde{X}^L_{(k+1, i)} - \bar{X}<sup>L_{(k,j)})\cdot((\bar{X}</sup>L_{(k,j)} - \bar{X}<sup>L_{(k,l)})\times(\bar{X}</sup>L_{(k,j)} - \bar{X}^L_{(k,m)}))|}
   {|(\bar{X}^L_{(k,l)} - \bar{X}<sup>L_{(k,j)})\times(\bar{X}</sup>L_{(k,m)} - \bar{X}^L_{(k,j)})|}.\text{distance of point to planar}\tag{3}
   $$
 - Motion Estimation TODO
   - Corrected every point for a sweep
   - Motion estimation between two consecutive sweep</p>
<h1 id="lio-sam">LIO-SAM<a class="headerlink" href="#lio-sam" title="Permanent link">&para;</a></h1>
<h2 id="assume_1">Assume<a class="headerlink" href="#assume_1" title="Permanent link">&para;</a></h2>
<ol>
<li>assume nonlinear motion model for point cloud de-skew,estimate the sensor motion during a lidar scan using raw IMU measurements</li>
<li>the estimated motion above also serve as an intial guess for lidar odometry optimization</li>
<li>the lidar-odometry result above is then used to estimate the bias of the IMU in the factor graph.</li>
</ol>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" title="Back to top" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../slam_imupre_vins/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Note after reading paper of VINS" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Note after reading paper of VINS
            </div>
          </div>
        </a>
      
      
        
        <a href="../segmentation/cloud-segmentation-hdmap/" class="md-footer__link md-footer__link--next" aria-label="Next: cloud segmentation and filtered by hdmap" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              cloud segmentation and filtered by hdmap
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.top", "navigation.tabs"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.b0710199.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.76f349be.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>